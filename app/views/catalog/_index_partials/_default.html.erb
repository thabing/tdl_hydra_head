<tr>
  <td class="number_td"><%= @result_no += 1 %></td>
  <td class="title_td">
    <span class="table_title">
    <% unless document[:title_t].nil? %>
     <%= link_to document[:title_t][0], "/catalog/" + document[:id]  %>
    <% end %>
    </span>
  </td>
  <td class="creator_td">
    <% unless document[:creator_t].nil?
       document[:creator_t].each { |creator| %>
     <%= creator %><br/>
    <%}
     end%>
  </td>
  <td class="date_td">
    <%
       date = document[:dateCreated_t]
       valid_date = Time.new

       if date.nil? || (!date.nil? && date == "")
         date = document[:temporal_t]
	end

       #try to address dates that start "ca. 1970" 
       unless date.nil?
	 date = date.to_s
       end

       if (!date.nil? && !date[/^c/].nil?)
	date = date.split[1..10].join(' ')      
       end 
       #end handling circa dates

       #Chronic is not gonna like the 4 digit date here it may interpret as military time, and
       #this may be imperfect but lets try this.

       unless date.nil?
         if date.length() == 4
          date += "-01-01"
	 elsif date.length() == 9
          date = date[0..3] += "-01-01"
         elsif date.length() == 7
	  date = date[0..3] += "-01-01"
         end

         unparsed_date =Chronic.parse(date)
         unless unparsed_date.nil?
            valid_date = Time.at(unparsed_date)
         end

       end

       valid_date_string = ""
       unless date.nil?
         valid_date_string = valid_date.strftime("%Y")
       end

    %>
    <%#= valid_date.strftime("%b %d, %Y")  %>
    <%= valid_date_string  %>
  </td>
  <% if !document[:type2_t].nil? && document[:type2_t].first == 'image' %>
      <td class="thumbnail_td" align="center">
        <ul class="thumbnails">
          <li class="nothumbnailmargin">
            <%= link_to image_tag("/file_assets/thumb/"+document[:id] , :alt=>document[:title],:class=>"thumbnailwidth"), "/catalog/" + document[:id],:class=>"thumbnail" %>
          </li>
        </ul>
      </td>
  <% else %>
      <td class="thumbnail_td">&nbsp;</td>
  <% end %>
</tr>
